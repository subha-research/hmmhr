const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/AttendanceCalendar-BDWrUs2w.js","assets/frappe-ui-XXN5389g.js","assets/frappe-ui-IZoKCQSt.css","assets/AttendanceRequestItem-C4XwshWK.js","assets/ListItem-C0PPgXm1.js","assets/EmployeeAvatar-ehprJWCX.js","assets/index-CbDAEvbD.js","assets/index-z9dJOzqB.css","assets/attendance-BgYun18O.js","assets/BaseLayout-MfyZAXL0.js","assets/notifications-ZD42KlGa.js","assets/CheckInPanel-C1_sL8Mi.js","assets/formatters-DKvews8N.js","assets/CustomIonModal-C5puBHWS.js","assets/EmployeeAdvanceBalance-B7PQ4zqJ.js","assets/EmployeeAdvanceItem-B3CKo-GT.js","assets/EmployeeAdvanceIcon-CuVYWiPI.js","assets/EmployeeCheckinItem-Bg8FNq54.js","assets/ExpenseAdvancesTable-Rl_aM2Mf.js","assets/workflow-B8q7fBbJ.js","assets/workflow-yjIbxtTX.css","assets/ExpenseClaimItem-fyDuaz58.js","assets/ExpenseClaimSummary-BMwHh7Sg.js","assets/claims-BcbwDeiX.js","assets/ExpenseItems-CADHY4Pd.js","assets/ExpenseTaxesTable-Beg01CpI.js","assets/FormField-BpF4IXAT.js","assets/Link-DllPwrQU.js","assets/ExpensesTable-nWE9RteY.js","assets/FileUploaderView-BFlUUILK.js","assets/FileUploaderView-B6XMMpRf.css","assets/FormView-Bm8LD5wO.js","assets/FormattedField-Cp10Nl0u.js","assets/Holidays-D7jHo7or.js","assets/LeaveBalance-iOD5feuw.js","assets/SemicircleChart-Q2Rhxlox.js","assets/leaves-BUTyXwpc.js","assets/LeaveRequestItem-Bw74hYil.js","assets/ListFiltersActionSheet-CJzgEIAT.js","assets/ListView-Fwz9ay-6.js","assets/TabButtons-DiSEOmy_.js","assets/ShiftRequestItem-Bzcp41n7.js","assets/ShiftIcon-C669VV3Z.js","assets/ShiftAssignmentItem-DY5FSpCS.js","assets/realtime-C0nkk1z9.js","assets/ProfileInfoModal-DQzoD9OU.js","assets/QuickLinks-OB7m1a5t.js","assets/RequestList-K_wdlnBr.js","assets/RequestPanel-CcSIAZZV.js","assets/SalaryDetailTable-DsNt6DEp.js","assets/SalarySlipItem-BzJTWIhc.js"])))=>i.map(i=>d[i]);
var de=Object.defineProperty;var G=Object.getOwnPropertySymbols;var _e=Object.prototype.hasOwnProperty,ue=Object.prototype.propertyIsEnumerable;var J=(u,t,o)=>t in u?de(u,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):u[t]=o,K=(u,t)=>{for(var o in t||(t={}))_e.call(t,o)&&J(u,o,t[o]);if(G)for(var o of G(t))ue.call(t,o)&&J(u,o,t[o]);return u};import{E as me,i as ce,a9 as pe,r as k,a8 as fe,N as S,c as g,ad as ye,a as ve,e as Ee,f as m,a3 as I,q as i,j as _,x as c,z as A,k as p,t as f,v as h,F as X,H as Y,I as De,J as be,l as y,n as V,a5 as Te,_ as e,ac as Z}from"./frappe-ui-XXN5389g.js";import{c as Le,m as ee}from"./index-CbDAEvbD.js";import Ie from"./FormattedField-Cp10Nl0u.js";import{g as Ae,u as he,W as Ve,F as xe}from"./workflow-B8q7fBbJ.js";import{f as Re}from"./formatters-DKvews8N.js";const we=(u,t,o)=>{const v=u[t];return v?typeof v=="function"?v():Promise.resolve(v):new Promise((E,D)=>{(typeof queueMicrotask=="function"?queueMicrotask:setTimeout)(D.bind(null,new Error("Unknown variable dynamic import: "+t+(t.split("/").length!==o?". Note that variables only represent file names one level deep.":""))))})},Pe={key:0,class:"bg-white w-full flex flex-col items-center justify-center pb-5 max-h-[calc(100vh-5rem)]"},ke={class:"w-full flex flex-row gap-2 pt-8 pb-5 border-b justify-center items-center sticky top-0 z-[100]"},Se={class:"text-gray-900 font-bold text-lg text-center"},ge={class:"w-full p-4 overflow-auto"},Oe={class:"flex flex-col items-center justify-center gap-5"},Ce={class:"text-gray-600 text-base"},Fe={key:0,class:"flex flex-col gap-2 w-full"},je={class:"text-gray-600 text-base"},qe={class:"w-full flex flex-col items-center gap-2"},Be={class:"flex flex-row items-center justify-between text-gray-700 text-sm"},Me=["onClick"],Ne={key:1,class:"flex w-full flex-row items-center justify-between gap-3 sticky bottom-0 border-t z-[100] p-4"},$e={key:2,class:"flex w-full flex-row items-center justify-between gap-3 sticky bottom-0 border-t z-[100] p-4"},He={key:3,class:"flex w-full flex-row items-center justify-between gap-3 sticky bottom-0 border-t z-[100] p-4"},We={__name:"RequestActionSheet",props:{fields:{type:Array,required:!0},showOpenForm:{type:Boolean,default:!0},modelValue:{type:Object,required:!0}},setup(u){const t=ce("$translate"),o=u,v=pe();let E=k(!1),D=k({}),x=k(null);function te(a){D.value=a,E.value=!0}const n=fe({doctype:o.modelValue.doctype,name:o.modelValue.name,auto:!0,onSuccess(a){R.reload()}}),R=S({url:"hrms.api.get_attachments",params:{dt:o.modelValue.doctype,dn:o.modelValue.name}}),ae=S({url:"frappe.client.get_doc_permissions",params:{doctype:o.modelValue.doctype,docname:o.modelValue.name},auto:!0}),le=S({url:"hrms.api.get_permitted_fields_for_write",params:{doctype:o.modelValue.doctype},auto:!0});function w(a){var l,s;return a==="approval"?(l=le.data)==null?void 0:l.includes(b.value):(s=ae.data)==null?void 0:s.permissions[a]}const oe=g(()=>{var l,s,d;let a=(l=n==null?void 0:n.doc)==null?void 0:l.currency;return!a&&((s=n==null?void 0:n.doc)!=null&&s.company)&&(a=Ae((d=n==null?void 0:n.doc)==null?void 0:d.company)),a}),ie=g(()=>o.fields.filter(a=>{var l,s;return a.fieldtype==="Currency"?a.value=Re((l=n.doc)==null?void 0:l[a.fieldname],oe.value):(a.fieldtype==="Table"&&(a.component=ye(()=>we(Object.assign({"./AttendanceCalendar.vue":()=>e(()=>import("./AttendanceCalendar-BDWrUs2w.js"),__vite__mapDeps([0,1,2])),"./AttendanceRequestItem.vue":()=>e(()=>import("./AttendanceRequestItem-C4XwshWK.js"),__vite__mapDeps([3,1,2,4,5,6,7,8])),"./BaseLayout.vue":()=>e(()=>import("./BaseLayout-MfyZAXL0.js"),__vite__mapDeps([9,6,1,2,7,10])),"./BottomTabs.vue":()=>e(()=>import("./index-CbDAEvbD.js").then(d=>d.P),__vite__mapDeps([6,1,2,7])),"./CheckInPanel.vue":()=>e(()=>import("./CheckInPanel-C1_sL8Mi.js"),__vite__mapDeps([11,1,2,6,7,12])),"./CustomIonModal.vue":()=>e(()=>import("./CustomIonModal-C5puBHWS.js"),__vite__mapDeps([13,6,1,2,7])),"./EmployeeAdvanceBalance.vue":()=>e(()=>import("./EmployeeAdvanceBalance-B7PQ4zqJ.js"),__vite__mapDeps([14,15,1,2,4,5,6,7,16,12])),"./EmployeeAdvanceItem.vue":()=>e(()=>import("./EmployeeAdvanceItem-B3CKo-GT.js"),__vite__mapDeps([15,1,2,4,5,6,7,16,12])),"./EmployeeAvatar.vue":()=>e(()=>import("./EmployeeAvatar-ehprJWCX.js"),__vite__mapDeps([5,1,2,6,7])),"./EmployeeCheckinItem.vue":()=>e(()=>import("./EmployeeCheckinItem-Bg8FNq54.js"),__vite__mapDeps([17,1,2,4,5,6,7,12])),"./EmptyState.vue":()=>e(()=>import("./index-CbDAEvbD.js").then(d=>d.Q),__vite__mapDeps([6,1,2,7])),"./ExpenseAdvancesTable.vue":()=>e(()=>import("./ExpenseAdvancesTable-Rl_aM2Mf.js"),__vite__mapDeps([18,1,2,19,6,7,20,12])),"./ExpenseClaimItem.vue":()=>e(()=>import("./ExpenseClaimItem-fyDuaz58.js"),__vite__mapDeps([21,1,2,4,5,6,7,19,20,12])),"./ExpenseClaimSummary.vue":()=>e(()=>import("./ExpenseClaimSummary-BMwHh7Sg.js"),__vite__mapDeps([22,1,2,23,6,7,12])),"./ExpenseItems.vue":()=>e(()=>import("./ExpenseItems-CADHY4Pd.js"),__vite__mapDeps([24,19,1,2,6,7,20,12])),"./ExpenseTaxesTable.vue":()=>e(()=>import("./ExpenseTaxesTable-Beg01CpI.js"),__vite__mapDeps([25,1,2,26,27,6,7,13,12])),"./ExpensesTable.vue":()=>e(()=>import("./ExpensesTable-nWE9RteY.js"),__vite__mapDeps([28,1,2,26,27,6,7,13,23,12])),"./FilePreviewModal.vue":()=>e(()=>import("./workflow-B8q7fBbJ.js").then(d=>d.b),__vite__mapDeps([19,1,2,6,7,20])),"./FileUploaderView.vue":()=>e(()=>import("./FileUploaderView-BFlUUILK.js"),__vite__mapDeps([29,1,2,6,7,19,20,30])),"./FormField.vue":()=>e(()=>import("./FormField-BpF4IXAT.js"),__vite__mapDeps([26,1,2,27])),"./FormView.vue":()=>e(()=>import("./FormView-Bm8LD5wO.js"),__vite__mapDeps([31,1,2,26,27,29,6,7,19,20,30,12])),"./FormattedField.vue":()=>e(()=>import("./FormattedField-Cp10Nl0u.js"),__vite__mapDeps([32,1,2,5,6,7])),"./Holidays.vue":()=>e(()=>import("./Holidays-D7jHo7or.js"),__vite__mapDeps([33,6,1,2,7])),"./InstallPrompt.vue":()=>e(()=>import("./index-CbDAEvbD.js").then(d=>d.O),__vite__mapDeps([6,1,2,7])),"./LeaveBalance.vue":()=>e(()=>import("./LeaveBalance-iOD5feuw.js"),__vite__mapDeps([34,35,1,2,36,6,7])),"./LeaveRequestItem.vue":()=>e(()=>import("./LeaveRequestItem-Bw74hYil.js"),__vite__mapDeps([37,1,2,4,5,6,7,36])),"./Link.vue":()=>e(()=>import("./Link-DllPwrQU.js"),__vite__mapDeps([27,1,2])),"./ListFiltersActionSheet.vue":()=>e(()=>import("./ListFiltersActionSheet-CJzgEIAT.js"),__vite__mapDeps([38,26,1,2,27])),"./ListItem.vue":()=>e(()=>import("./ListItem-C0PPgXm1.js"),__vite__mapDeps([4,5,1,2,6,7])),"./ListView.vue":()=>e(()=>import("./ListView-Fwz9ay-6.js"),__vite__mapDeps([39,1,2,6,7,40,17,4,5,12,3,8,41,42,43,37,36,21,19,20,15,16,38,26,27,13,44,32])),"./ProfileInfoModal.vue":()=>e(()=>import("./ProfileInfoModal-DQzoD9OU.js"),__vite__mapDeps([45,1,2,32,5,6,7])),"./QuickLinks.vue":()=>e(()=>import("./QuickLinks-OB7m1a5t.js"),__vite__mapDeps([46,1,2])),"./RequestList.vue":()=>e(()=>import("./RequestList-K_wdlnBr.js"),__vite__mapDeps([47,6,1,2,7,32,5,19,20,12])),"./RequestPanel.vue":()=>e(()=>import("./RequestPanel-CcSIAZZV.js"),__vite__mapDeps([48,40,1,2,47,6,7,32,5,19,20,12,8,23,36,3,4,21,37,41,42,44])),"./SalaryDetailTable.vue":()=>e(()=>import("./SalaryDetailTable-DsNt6DEp.js"),__vite__mapDeps([49,6,1,2,7,12])),"./SalarySlipItem.vue":()=>e(()=>import("./SalarySlipItem-BzJTWIhc.js"),__vite__mapDeps([50,1,2,4,5,6,7,12])),"./SemicircleChart.vue":()=>e(()=>import("./SemicircleChart-Q2Rhxlox.js"),__vite__mapDeps([35,1,2])),"./ShiftAssignmentItem.vue":()=>e(()=>import("./ShiftAssignmentItem-DY5FSpCS.js"),__vite__mapDeps([43,1,2,4,5,6,7,42,8])),"./ShiftRequestItem.vue":()=>e(()=>import("./ShiftRequestItem-Bzcp41n7.js"),__vite__mapDeps([41,1,2,4,5,6,7,42,8])),"./TabButtons.vue":()=>e(()=>import("./TabButtons-DiSEOmy_.js"),__vite__mapDeps([40,1,2])),"./WorkflowActionSheet.vue":()=>e(()=>import("./workflow-B8q7fBbJ.js").then(d=>d.c),__vite__mapDeps([19,1,2,6,7,20]))}),`./${a.componentName}.vue`,2))),a.value=((s=n==null?void 0:n.doc)==null?void 0:s[a.fieldname])||o.modelValue[a.fieldname]),a.value})),b=g(()=>o.modelValue.doctype==="Expense Claim"?"approval_status":"status"),ne=({status:a="",docstatus:l=0})=>{if(a)return t("{0} successfully!",[t(a)]);if(l)return t("Document {0} successfully!",[t(l===1?"submitted":"cancelled")])},se=({status:a="",docstatus:l=0})=>{if(a)return t("{0} failed!",[a===t("Approved")?t("Approval"):t("Rejection")]);if(l)return t("Document {0} failed!",[t(l===1?"submission":"cancellation")])},T=({status:a="",docstatus:l=0})=>{let s={};a&&(s[b.value]=a),l&&(s.docstatus=l),n.setValue.submit(K({},s),{onSuccess(){l!==0&&ee.dismiss(),Z({title:t("Success"),text:ne({status:a,docstatus:l}),icon:"check-circle",position:"bottom-center",iconClasses:"text-green-500"})},onError(){Z({title:t("Error"),text:se({status:a,docstatus:l}),icon:"alert-circle",position:"bottom-center",iconClasses:"text-red-500"})}})},re=()=>{ee.dismiss(),v.push({name:`${o.modelValue.doctype.replace(/\s+/g,"")}DetailView`,params:{id:o.modelValue.name}})};return ve(()=>{x.value=he(o.modelValue.doctype)}),(a,l)=>{var d,O,C,F,j,q,B,M,N,$,H,W,z,Q,U;const s=Ee("Button");return(d=i(n))!=null&&d.doc?(_(),m("div",Pe,[c("div",ke,[c("span",Se,f(i(t)((O=i(n))==null?void 0:O.doctype)),1),o.showOpenForm?(_(),A(i(h),{key:0,name:"external-link",class:"h-4 w-4 text-gray-500 cursor-pointer",onClick:re})):I("",!0)]),c("div",ge,[c("div",Oe,[(_(!0),m(X,null,Y(ie.value,r=>{var L,P;return _(),m("div",{key:r.fieldname,class:De([["Small Text","Text","Long Text","Table","geolocation"].includes(r.fieldtype)?"flex-col":"flex-row items-center justify-between","flex w-full"])},[c("div",Ce,f(i(t)(r.label,null,(L=o.modelValue)==null?void 0:L.doctype)),1),r.fieldtype==="Table"?(_(),A(be(r.component),{key:0,doc:(P=i(n))==null?void 0:P.doc},null,8,["doc"])):(_(),A(Ie,{key:1,value:r.value,fieldtype:r.fieldtype,fieldname:r.fieldname},null,8,["value","fieldtype","fieldname"]))],2)}),128)),(F=(C=i(R))==null?void 0:C.data)!=null&&F.length?(_(),m("div",Fe,[c("div",je,f(i(t)("Attachments")),1),c("ul",qe,[(_(!0),m(X,null,Y(i(R).data,(r,L)=>(_(),m("li",{class:"bg-gray-100 rounded p-2 w-full",key:L},[c("div",Be,[c("span",{class:"grow",onClick:P=>te(r)},f(r.file_name||r.name),9,Me)])]))),128))])])):I("",!0)])]),(j=i(x))!=null&&j.hasWorkflow?(_(),A(Ve,{key:0,doc:i(n).doc,workflow:i(x),view:"actionSheet"},null,8,["doc","workflow"])):["Open","Draft"].includes((B=(q=i(n))==null?void 0:q.doc)==null?void 0:B[b.value])&&w("approval")?(_(),m("div",Ne,[p(s,{onClick:l[0]||(l[0]=r=>T({status:"Rejected"})),class:"w-full py-5",variant:"subtle",theme:"red"},{prefix:y(()=>[p(i(h),{name:"x",class:"w-4"})]),default:y(()=>[V(" "+f(i(t)("Reject")),1)]),_:1}),p(s,{onClick:l[1]||(l[1]=r=>T({status:"Approved"})),class:"w-full py-5",variant:"solid",theme:"green"},{prefix:y(()=>[p(i(h),{name:"check",class:"w-4"})]),default:y(()=>[V(" "+f(i(t)("Approve")),1)]),_:1})])):((N=(M=i(n))==null?void 0:M.doc)==null?void 0:N.docstatus)===0&&(((H=($=i(n))==null?void 0:$.doc)==null?void 0:H.doctype)==="Attendance Request"||["Approved","Rejected"].includes((z=(W=i(n))==null?void 0:W.doc)==null?void 0:z[b.value]))&&w("submit")?(_(),m("div",$e,[p(s,{onClick:l[2]||(l[2]=r=>T({docstatus:1})),class:"w-full py-5",variant:"solid"},{default:y(()=>[V(f(i(t)("Submit")),1)]),_:1})])):((U=(Q=i(n))==null?void 0:Q.doc)==null?void 0:U.docstatus)===1&&w("cancel")?(_(),m("div",He,[p(s,{onClick:l[3]||(l[3]=r=>T({docstatus:2})),class:"w-full py-5",variant:"subtle",theme:"red"},{prefix:y(()=>[p(i(h),{name:"x",class:"w-4"})]),default:y(()=>[V(" "+f(i(t)("Cancel")),1)]),_:1})])):I("",!0),p(i(Le),{ref:"modal","is-open":i(E),onDidDismiss:l[4]||(l[4]=r=>Te(E)?E.value=!1:E=!1)},{default:y(()=>[p(xe,{file:i(D)},null,8,["file"])]),_:1},8,["is-open"])])):I("",!0)}}},Xe=me(We,[["__scopeId","data-v-f629790b"]]),Ye=[{fieldname:"name",label:"ID",fieldtype:"Data"},{fieldname:"leave_type",label:"Leave Type",fieldtype:"Link"},{fieldname:"leave_dates",label:"Leave Dates",fieldtype:"Data"},{fieldname:"half_day",label:"Half Day",fieldtype:"Check"},{fieldname:"half_day_date",label:"Half Day Date",fieldtype:"Date"},{fieldname:"total_leave_days",label:"Total Leave Days",fieldtype:"Float"},{fieldname:"employee",label:"Employee",fieldtype:"Link"},{fieldname:"leave_balance",label:"Leave Balance",fieldtype:"Float"},{fieldname:"status",label:"Status",fieldtype:"Select"},{fieldname:"description",label:"Reason",fieldtype:"Small Text"}],Ze=[{fieldname:"name",label:"ID",fieldtype:"Data"},{fieldname:"posting_date",label:"Posting Date",fieldtype:"Date"},{fieldname:"employee",label:"Employee",fieldtype:"Link"},{fieldname:"expenses",label:"Expenses",fieldtype:"Table",componentName:"ExpenseItems"},{fieldname:"total_claimed_amount",label:"Total Claimed Amount",fieldtype:"Currency"},{fieldname:"total_sanctioned_amount",label:"Total Sanctioned Amount",fieldtype:"Currency"},{fieldname:"total_taxes_and_charges",label:"Total Taxes and Charges",fieldtype:"Currency"},{fieldname:"total_advance_amount",label:"Total Advance Amount",fieldtype:"Currency"},{fieldname:"grand_total",label:"Grand Total",fieldtype:"Currency"},{fieldname:"status",label:"Status",fieldtype:"Select"},{fieldname:"approval_status",label:"Approval Status",fieldtype:"Select"}],et=[{fieldname:"name",label:"ID",fieldtype:"Data"},{fieldname:"attendance_dates",label:"Attendance Dates",fieldtype:"Data"},{fieldname:"total_attendance_days",label:"Total Attendance Days",fieldtype:"Data"},{fieldname:"include_holidays",label:"Include Holidays",fieldtype:"Check"},{fieldname:"shift",label:"Shift",fieldtype:"Link"},{fieldname:"reason",label:"Reason",fieldtype:"Select"},{fieldname:"employee",label:"Employee",fieldtype:"Link"}],tt=[{fieldname:"name",label:"ID",fieldtype:"Data"},{fieldname:"shift_type",label:"Shift Type",fieldtype:"Link"},{fieldname:"shift_timing",label:"Shift Timing",fieldtype:"Data"},{fieldname:"shift_dates",label:"Shift Dates",fieldtype:"Data"},{fieldname:"total_shift_days",label:"Total Shift Days",fieldtype:"Data"},{fieldname:"employee",label:"Employee",fieldtype:"Link"}],at=[{fieldname:"name",label:"ID",fieldtype:"Data"},{fieldname:"shift_type",label:"Shift Type",fieldtype:"Link"},{fieldname:"shift_dates",label:"Shift Dates",fieldtype:"Data"},{fieldname:"total_shift_days",label:"Total Shift Days",fieldtype:"Data"},{fieldname:"employee",label:"Employee",fieldtype:"Link"},{fieldname:"status",label:"Status",fieldtype:"Select"}],lt=[{fieldname:"name",label:"ID",fieldtype:"Data"},{fieldname:"log_type",label:"Log Type",fieldtype:"Data"},{fieldname:"date",label:"Date",fieldtype:"Date"},{fieldname:"formatted_time",label:"Time",fieldtype:"Time"},{fieldname:"formatted_latitude",label:"Latitude",fieldtype:"Data"},{fieldname:"formatted_longitude",label:"Longitude",fieldtype:"Data"},{fieldname:"geolocation",label:"Geolocation",fieldtype:"geolocation"}];export{et as A,Ze as E,Ye as L,Xe as R,tt as S,at as a,lt as b};
//# sourceMappingURL=requestSummaryFields-Ev7YF-eB.js.map
