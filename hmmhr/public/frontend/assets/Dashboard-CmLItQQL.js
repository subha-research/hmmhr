import{r as b,a1 as v,i as m,c as M,w as V,a as C,a2 as j,z as w,l as k,q as t,e as N,j as r,x as c,f as i,a3 as D,k as u,t as S,a4 as L,a5 as T,F,H as R}from"./frappe-ui-XXN5389g.js";import U from"./BaseLayout-MfyZAXL0.js";import{_ as q}from"./index-CbDAEvbD.js";import z from"./SalarySlipItem-BzJTWIhc.js";import{f as E}from"./formatters-DKvews8N.js";import"./notifications-ZD42KlGa.js";import"./ListItem-C0PPgXm1.js";import"./EmployeeAvatar-ehprJWCX.js";const H={class:"flex flex-col items-center my-7 p-4"},A={class:"flex flex-col w-full bg-white rounded py-5 px-3.5 gap-5"},G={key:0,class:"flex flex-col w-full gap-1.5"},I={class:"text-gray-600 text-sm font-medium leading-5"},J={class:"text-gray-800 text-xl font-bold leading-6"},K={class:"flex flex-col items-center mt-5 mb-7 w-full"},O={key:0,class:"flex flex-col bg-white rounded mt-5 overflow-auto w-full"},oe={__name:"Dashboard",setup(Q){var x,g;let s=b({}),f=b({});const _=m("$employee"),y=m("$dayjs"),p=m("$socket"),n=m("$translate"),P=v({doctype:"Payroll Period",fields:["name","start_date","end_date"],filters:{company:(x=_.data)==null?void 0:x.company},orderBy:"start_date desc",auto:!0,transform(e){return e.map(a=>(f.value[a.name]=a,{label:Y(a),value:a.name}))},onSuccess:e=>{s.value=e[0]}}),l=v({doctype:"Salary Slip",fields:["name","start_date","end_date","currency","gross_pay","net_pay","year_to_date"],filters:{employee:(g=_.data)==null?void 0:g.name,docstatus:1},orderBy:"end_date desc"}),d=M(()=>{var e;return(e=l.data)==null?void 0:e[0]});function Y(e){return`${y(e==null?void 0:e.start_date).format("MMM YYYY")} - ${y(e==null?void 0:e.end_date).format("MMM YYYY")}`}return V(()=>s.value,e=>{let a=f.value[e==null?void 0:e.value];l.filters.start_date=["between",[a==null?void 0:a.start_date,a==null?void 0:a.end_date]],l.reload()}),C(()=>{p.on("hrms:update_salary_slips",e=>{e.employee===_.data.name&&l.reload()})}),j(()=>{p.off("hrms:update_salary_slips")}),(e,a)=>{const $=N("router-link");return r(),w(U,{pageTitle:t(n)("Salary Slips")},{body:k(()=>{var h;return[c("div",H,[c("div",A,[d.value&&d.value.year_to_date?(r(),i("div",G,[c("span",I,S(t(n)("Year To Date")),1),c("span",J,S(t(E)(d.value.year_to_date,d.value.currency)),1)])):D("",!0),u(t(L),{label:t(n)("Payroll Period"),class:"w-full",placeholder:t(n)("Select Payroll Period"),modelValue:t(s),"onUpdate:modelValue":a[0]||(a[0]=o=>T(s)?s.value=o:s=o),options:t(P).data},null,8,["label","placeholder","modelValue","options"])]),c("div",K,[(h=t(l).data)!=null&&h.length?(r(),i("div",O,[(r(!0),i(F,null,R(t(l).data,o=>(r(),i("div",{class:"p-3.5 items-center justify-between border-b cursor-pointer",key:o.name},[u($,{to:{name:"SalarySlipDetailView",params:{id:o.name}}},{default:k(({navigate:B})=>[u(z,{doc:o,onClick:B},null,8,["doc","onClick"])]),_:2},1032,["to"])]))),128))])):(r(),w(q,{key:1,message:t(n)("No salary slips found")},null,8,["message"]))])])]}),_:1},8,["pageTitle"])}}};export{oe as default};
//# sourceMappingURL=Dashboard-CmLItQQL.js.map
