import{I as V,a as M,_ as R}from"./index-CbDAEvbD.js";import{r as z,c as D,N as P,a as A,z as d,l as o,q as e,i as y,a9 as H,e as C,j as n,k as l,x as s,v as h,t as c,f as m,a3 as u,n as p,F as T,H as E,I as F}from"./frappe-ui-XXN5389g.js";import q from"./EmployeeAvatar-ehprJWCX.js";import{a as U,n as t,u as g}from"./notifications-ZD42KlGa.js";const Y={class:"flex flex-col h-screen w-screen"},G={class:"w-full sm:w-96"},J={class:"flex flex-row bg-white shadow-sm py-4 px-3 items-center justify-between border-b sticky top-0 z-10"},K={class:"flex flex-row items-center"},O={class:"text-xl font-semibold text-gray-900"},Q={class:"flex flex-col gap-4 mt-5 p-4"},W={class:"flex flex-row justify-between items-center"},X={key:0,class:"text-lg text-gray-800 font-semibold"},Z={class:"flex ml-auto gap-1"},ee={key:0,class:"flex flex-col bg-white rounded"},te={class:"flex flex-col gap-0.5 grow ml-3"},se=["innerHTML"],ae={class:"text-xs font-normal text-gray-500"},oe={key:1,class:"flex"},N=10,ue={__name:"Notifications",setup(ne){const $=y("$dayjs"),x=H(),i=y("$translate"),b=z(0),j=D(()=>{var r;return((r=window.frappe)==null?void 0:r.boot.push_relay_server_url)&&U.data}),k=P({url:"hrms.api.mark_all_notifications_as_read",onSuccess(){t.reload()}});function I(r){t.setValue.submit({name:r,read:1},{onSuccess:()=>{g.reload()}})}function L(r){return{name:`${r.reference_document_type.replace(/\s+/g,"")}DetailView`,params:{id:r.reference_document_name}}}A(()=>{t.start=0,t.pageLength=10,t.fetch()});function B(){b.value+=N,t.start=b.value,t.pageLength=N,t.list.fetch()}return(r,f)=>{const _=C("Button"),S=C("router-link");return n(),d(e(V),null,{default:o(()=>[l(e(M),{class:"ion-padding"},{default:o(()=>{var v,w;return[s("div",Y,[s("div",G,[s("header",J,[s("div",K,[l(_,{variant:"ghost",class:"!pl-0 hover:bg-white",onClick:f[0]||(f[0]=a=>e(x).back())},{default:o(()=>[l(e(h),{name:"chevron-left",class:"h-5 w-5"})]),_:1}),s("h2",O,c(e(i)("Notifications")),1)])]),s("div",Q,[s("div",W,[e(g).data?(n(),m("div",X,c(e(i)("{0} Unread",[e(g).data])),1)):u("",!0),s("div",Z,[j.value?(n(),d(_,{key:0,variant:"outline",onClick:f[1]||(f[1]=a=>e(x).push({name:"Settings"}))},{prefix:o(()=>[l(e(h),{name:"settings",class:"w-4"})]),default:o(()=>[p(" "+c(e(i)("Settings")),1)]),_:1})):u("",!0),e(g).data?(n(),d(_,{key:1,variant:"outline",onClick:e(k).submit,loading:e(k).loading},{prefix:o(()=>[l(e(h),{name:"check-circle",class:"w-4"})]),default:o(()=>[p(" "+c(e(i)("Mark all as read")),1)]),_:1},8,["onClick","loading"])):u("",!0)])]),(v=e(t).data)!=null&&v.length?(n(),m("div",ee,[(n(!0),m(T,null,E(e(t).data,a=>(n(),d(S,{class:F(["flex flex-row items-start p-4 justify-between border-b before:mt-3","before:content-[''] before:mr-2 before:shrink-0 before:w-1.5 before:h-1.5 before:rounded-full",a.read?"bg-white-500":"before:bg-blue-500"]),key:a.name,to:L(a),onClick:re=>I(a.name)},{default:o(()=>[l(q,{userID:a.from_user,size:"lg"},null,8,["userID"]),s("div",te,[s("div",{class:"text-sm leading-5 font-normal text-gray-800",innerHTML:a.message},null,8,se),s("div",ae,c(e($)(a.creation).fromNow()),1)])]),_:2},1032,["class","to","onClick"]))),128))])):u("",!0),(w=e(t).data)!=null&&w.length&&e(t).hasNextPage?(n(),m("div",oe,[l(_,{variant:"outline",class:"ml-auto",onClick:B},{default:o(()=>[p(c(e(i)("Load more")),1)]),_:1})])):e(t).data?u("",!0):(n(),d(R,{key:2,message:e(i)("You have no notifications")},null,8,["message"]))])])])]}),_:1})]),_:1})}}};export{ue as default};
//# sourceMappingURL=Notifications-BX9fnNNf.js.map
